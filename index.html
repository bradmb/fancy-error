<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>FancyError by bradmb</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>FancyError</h1>
        <h2>Enhanced error page for ASP.NET MVC applications</h2>
        <a href="https://github.com/bradmb/fancy-error" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="fancyerror" class="anchor" href="#fancyerror" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>FancyError</h1>

<p><em>ASP.NET MVC library that provides enhanced error pages for your application</em></p>

<p>This project, which is still only a few days into development at the time of writing this, was designed to provide application users with a simple error page that provides basic information about the issue and links to status and support pages (if configured). It also has the ability to track exception types and, based on how many unique visitors have seen the error, display a potential outage message to let users know that something not normal might be going on.</p>

<hr>

<h2>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How it works</h2>

<p>The logic behind this is fairly simple, actually. When installed, this library will hook in to the application's error event handling code, adding itself as another consumer of that data. Upon throwing an error, FancyError takes that information, look for potential outage trends, and replaces the response back to the browser with its own embedded HTML page, replacing the standard yellow error screen.</p>

<h2>
<a id="what-it-looks-like" class="anchor" href="#what-it-looks-like" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What it looks like</h2>

<p>At this stage, the page design is still a work in progress. Currently it's a very basic red error page with not a whole lot of detail on it, but gives a general idea of what happened and if we're seeing a trend (outage) going on.</p>

<p><img src="http://i.imgur.com/mDAQWtM.png" width="800"></p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<p>Currently the minimum requirement is an ASP.NET MVC application running .NET 4.5. It is possible this could work in non-MVC environments, but that has not yet been tested.</p>

<h2>
<a id="how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to install</h2>

<p>The recommended way to install this is via a NuGet package, which will install the library and make the changes needed to your web.config file:</p>

<div class="highlight highlight-source-powershell"><pre>PM<span class="pl-k">&gt;</span> <span class="pl-c1">Install-Package</span> FancyError <span class="pl-k">-</span>Pre</pre></div>

<p>If you'd like to install this manually, grab the source code or a <a href="https://github.com/bradmb/fancy-error/releases">copy of the compiled library from the releases page</a> and add it as a reference. Within your web.config, update it so FancyError is referenced within your <em>system.webServer</em> section:</p>

<div class="highlight highlight-text-xml"><pre>  &lt;<span class="pl-ent">system</span>.webServer&gt;
    &lt;<span class="pl-ent">modules</span>&gt;
      &lt;<span class="pl-ent">add</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>FancyError<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>FancyError.HttpHandler, FancyError<span class="pl-pds">"</span></span> /&gt;
    &lt;/<span class="pl-ent">modules</span>&gt;
  &lt;/<span class="pl-ent">system</span>.webServer&gt;</pre></div>

<h2>
<a id="how-to-setup" class="anchor" href="#how-to-setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to setup</h2>

<p>Out of the box this will run right away without any additional changes. However, it is suggested to setup the support and status page links for the page, otherwise they will not be displayed (because nobody likes a broken link). Here is a configuration example within an application's <em>Application_Start</em> section:</p>

<div class="highlight highlight-source-cs"><pre>FancyError.FancyClient.Configure(<span class="pl-k">new</span> FancyError.Models.ClientConfiguration
{
    ApplicationName = <span class="pl-s"><span class="pl-pds">"</span>My Fancy App<span class="pl-pds">"</span></span>,
    SupportLink = <span class="pl-s"><span class="pl-pds">"</span>http://my.support.link<span class="pl-pds">"</span></span>,
    StatusLink = <span class="pl-s"><span class="pl-pds">"</span>http://my.status.link<span class="pl-pds">"</span></span>
});</pre></div>

<p>The configuration model also supports some additional parameters, including:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>TrackUniqueVisitors</td>
<td>boolean</td>
<td>Ensures that the outage detection code does not count a user as more than one visit to the exception. If this is disabled, then it allows refreshing the page multiple times to trigger a potential outage</td>
<td><em>true</em></td>
</tr>
<tr>
<td>ErrorCountBeforeTrend</td>
<td>int</td>
<td>How many errors have to appears to visitors before it's considered a trend (and displaying the outage message)</td>
<td><em>5</em></td>
</tr>
<tr>
<td>ErrorCountTimeout</td>
<td>timespan</td>
<td>How long errors have to be quiet for before the trend tracking is reset and any potential outage message is removed</td>
<td><em>1 minute</em></td>
</tr>
<tr>
<td>ExternalTemplateLocation</td>
<td>string</td>
<td>If you want to provide your own error message page, provide the relative path (within your application's root) to that file here. This will override the entire internal page used</td>
<td><em>empty</em></td>
</tr>
</tbody>
</table>

<h2>
<a id="external-template-configuration" class="anchor" href="#external-template-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>External Template Configuration</h2>

<p>If you choose to use an external template, there are parameters you will likely want to setup in your template to ensure the page renders correctly:</p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>{EXCEPTION_TYPE}</td>
<td>The exception's namespace and name</td>
</tr>
<tr>
<td>{EXCEPTION_MESSAGE}</td>
<td>The actual exception message</td>
</tr>
<tr>
<td>{STATUS_PAGE_TEXT}</td>
<td>When a potential outage is staged, displays text about how to visit the status page</td>
</tr>
<tr>
<td>{SUPPORT_PAGE_TEXT}</td>
<td>Displays text about how to visit the support page</td>
</tr>
<tr>
<td>{OUTAGE}</td>
<td>A CSS class name of "show-outage" or "hide-outage", depending on if a potential outage is staged</td>
</tr>
<tr>
<td>{APP_TITLE}</td>
<td>The application name parameter from the configuration</td>
</tr>
</tbody>
</table>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/bradmb/fancy-error/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/bradmb/fancy-error/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/bradmb/fancy-error"></a> is maintained by <a href="https://github.com/bradmb">bradmb</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
